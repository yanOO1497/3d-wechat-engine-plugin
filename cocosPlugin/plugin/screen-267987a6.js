System.register(["./coordinates-converts-utils-3a9a8fd2.js","./event-enum-ebacbef3.js","./view-a5e32ee6.js"],(function(e){"use strict";var n,t,r,s,l,u,c,i,o,E,a,_,h;return{setters:[function(e){n=e.bM,t=e.bL,r=e.ck,s=e.e3,l=e.c,u=e.d,c=e.l,i=e.c3},function(e){o=e.q,E=e.r,a=e.l},function(e){_=e.V,h=e.i}],execute:function(){n(_.prototype,"View.prototype",[{name:"isAntiAliasEnabled",suggest:"The API of Texture2d have been largely modified, no alternative"},{name:"enableAntiAlias",suggest:"The API of Texture2d have been largely modified, no alternative"}]),t(r,"sys",[{name:"ALIPAY_MINI_GAME",newName:"YOUKU_MINI_GAME",customGetter:function(){return r.YOUKU_MINI_GAME}}]),t(o,"Node.EventType",[{name:"POSITION_PART",newName:"TRANSFORM_CHANGED"},{name:"ROTATION_PART",newName:"TRANSFORM_CHANGED"},{name:"SCALE_PART",newName:"TRANSFORM_CHANGED"}]);var f=null,m=null,v=null,O=null,S=e("S",function(e){function n(){return e.call(this)||this}s(n,e);var t=n.prototype;return t.setAccelerometerEnabled=function(e){e&&window.DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((function(e){l(3520,e),h.setAccelerometerEnabled("granted"===e)})).catch((function(e){u(3521,e.message),h.setAccelerometerEnabled(!1)})):h.setAccelerometerEnabled(e)},t.setAccelerometerInterval=function(e){h.setAccelerometerInterval(e)},t.on=function(n,t,r,s){return e.prototype.on.call(this,n,t,r,s),n!==o.KEY_DOWN&&n!==o.KEY_UP||f||(f=E.create({event:E.KEYBOARD,onKeyPressed:function(e,n){n.type=o.KEY_DOWN,p.emit(n.type,n)},onKeyReleased:function(e,n){n.type=o.KEY_UP,p.emit(n.type,n)}}),a.addListener(f,256)),n===o.DEVICEMOTION&&(m||(m=E.create({event:E.ACCELERATION,callback:function(e,n){n.type=o.DEVICEMOTION,c.systemEvent.emit(n.type,n)}}),a.addListener(m,256))),n!==o.TOUCH_START&&n!==o.TOUCH_MOVE&&n!==o.TOUCH_END&&n!==o.TOUCH_CANCEL||v||(v=E.create({event:E.TOUCH_ONE_BY_ONE,onTouchBegan:function(e,n){return n.type=o.TOUCH_START,c.systemEvent.emit(n.type,e,n),!0},onTouchMoved:function(e,n){n.type=o.TOUCH_MOVE,c.systemEvent.emit(n.type,e,n)},onTouchEnded:function(e,n){n.type=o.TOUCH_END,c.systemEvent.emit(n.type,e,n)},onTouchCancelled:function(e,n){n.type=o.TOUCH_CANCEL,c.systemEvent.emit(n.type,e,n)}}),a.addListener(v,256)),n!==o.MOUSE_DOWN&&n!==o.MOUSE_MOVE&&n!==o.MOUSE_UP&&n!==o.MOUSE_WHEEL||O||(O=E.create({event:E.MOUSE,onMouseDown:function(e){e.type=o.MOUSE_DOWN,c.systemEvent.emit(e.type,e)},onMouseMove:function(e){e.type=o.MOUSE_MOVE,c.systemEvent.emit(e.type,e)},onMouseUp:function(e){e.type=o.MOUSE_UP,c.systemEvent.emit(e.type,e)},onMouseScroll:function(e){e.type=o.MOUSE_WHEEL,c.systemEvent.emit(e.type,e)}}),a.addListener(O,256)),t},t.off=function(n,t,r){if(e.prototype.off.call(this,n,t,r),f&&(n===o.KEY_DOWN||n===o.KEY_UP)){var s=this.hasEventListener(o.KEY_DOWN),l=this.hasEventListener(o.KEY_UP);s||l||(a.removeListener(f),f=null)}if(m&&n===o.DEVICEMOTION&&(a.removeListener(m),m=null),v&&(n===o.TOUCH_START||n===o.TOUCH_MOVE||n===o.TOUCH_END||n===o.TOUCH_CANCEL)){var u=this.hasEventListener(o.TOUCH_START),c=this.hasEventListener(o.TOUCH_MOVE),i=this.hasEventListener(o.TOUCH_END),E=this.hasEventListener(o.TOUCH_CANCEL);u||c||i||E||(a.removeListener(v),v=null)}if(O&&(n===o.MOUSE_DOWN||n===o.MOUSE_MOVE||n===o.MOUSE_UP||n===o.MOUSE_WHEEL)){var _=this.hasEventListener(o.MOUSE_DOWN),h=this.hasEventListener(o.MOUSE_MOVE),S=this.hasEventListener(o.MOUSE_UP),p=this.hasEventListener(o.MOUSE_WHEEL);_||h||S||p||(a.removeListener(O),O=null)}},n}(i));S.EventType=o,c.SystemEvent=S;var p=e("a",new S);c.systemEvent=p;var d=e("s",{_supportsFullScreen:!1,_onfullscreenchange:null,_onfullscreenerror:null,_preOnFullScreenError:null,_preOnTouch:null,_touchEvent:"",_fn:null,_fnMap:[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement"]],init:function(){var e,n,t;this._fn={};var r,s=this._fnMap;for(e=0,n=s.length;e<n;e++)if((t=s[e])&&void 0!==document[t[1]]){for(e=0,r=t.length;e<r;e++)this._fn[s[0][e]]=t[e];break}this._supportsFullScreen=void 0!==this._fn.requestFullscreen,this._touchEvent="ontouchstart"in window?"touchstart":"mousedown"},get supportsFullScreen(){return this._supportsFullScreen},fullScreen:function(){return!!this._supportsFullScreen&&void 0!==document[this._fn.fullscreenElement]&&null!==document[this._fn.fullscreenElement]},requestFullScreen:function(e,n,t){if(this._supportsFullScreen){if(e=e||document.documentElement,n){var r=this._fn.fullscreenchange;this._onfullscreenchange&&document.removeEventListener(r,this._onfullscreenchange),this._onfullscreenchange=n,document.addEventListener(r,n,!1)}if(t){var s=this._fn.fullscreenerror;this._onfullscreenerror&&document.removeEventListener(s,this._onfullscreenerror),this._onfullscreenerror=t,document.addEventListener(s,t,{once:!0})}var l=e[this._fn.requestFullscreen]();return window.Promise&&l instanceof Promise&&l.catch((function(){})),l}},exitFullScreen:function(){var e;return this.fullScreen()&&(e=document[this._fn.exitFullscreen]()).catch((function(){})),e},autoFullScreen:function(e,n){e=e||document.body,this._ensureFullScreen(e,n),this.requestFullScreen(e,n)},disableAutoFullScreen:function(e){if(this._preOnTouch){var n=c.game.canvas||e,t=this._touchEvent;n.removeEventListener(t,this._preOnTouch),this._preOnTouch=null}},_ensureFullScreen:function(e,n){var t=this,r=c.game.canvas||e,s=this._fn.fullscreenerror,l=this._touchEvent,u=function(){t._preOnFullScreenError=null,t._preOnTouch&&r.removeEventListener(l,t._preOnTouch),t._preOnTouch=function(){t._preOnTouch=null,t.requestFullScreen(e,n)},r.addEventListener(l,t._preOnTouch,{once:!0})};this._preOnFullScreenError&&e.removeEventListener(s,this._preOnFullScreenError),this._preOnFullScreenError=u,e.addEventListener(s,u,{once:!0})}});d.init(),c.screen=d}}}));
